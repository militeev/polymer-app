<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="clg-router">
  
<template>
</template>

<script>

  'use strict';

  goog.provide('coligo.elements.Router');

  goog.require('coligo.behaviors.StateMutator');
 
  coligo.elements.Router = class Router {



    get behaviors() {
      return [
        coligo.behaviors.StateMutator
      ];
    }

    // Define behaviors with a getter.
    // Element setup goes in beforeRegister instead of createdCallback.
    beforeRegister() {
      this.is = 'clg-router';
      this.properties = {
        state: {
          type: Object,
          value: {},
          notify: true
        }
      };

      this.pages = {
        "#departments": "departments",
        "#projects": "projects",
        "#employees": "employees",
      }
    }

    onHashChange_() {
      console.log(window.location.hash);
      this.setRoute_();
    }

    setRoute_() {
      this.set('state.route', window.location.hash);
      this.set('state.currentPage', this.pages[window.location.hash]);
    }

    ready() { 
      window.addEventListener("hashchange", this.onHashChange_.bind(this));
      this.setRoute_();
    }

  }

  // Register the element using Polymer's constructor.
  Polymer(coligo.elements.Router);

</script>

</dom-module>
