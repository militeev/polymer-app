<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="clg-departments">
  
<template>
  <style is="custom-style">
    a[selected] {
      background: pink;
    }
  </style>
  <ul>
    <template id="departments-template" is="dom-repeat" items="[[list]]">
      <li id="[[item.id]]">
        <a href="#departments/[[item.id]]"
           selected$="[[isEqual_(item.id, selectedItemId_)]]">[[item.name]]</a>
      </li>
    </template>
  </ul>
</template>

<script>

  'use strict';

  goog.provide('coligo.elements.Departments');

  goog.require('coligo.scripts.actions');

  coligo.elements.Departments = class Departments {

    get behaviors() {
      return [
        coligo.behaviors.ListView
      ];
    }

    // Define behaviors with a getter.
    // Element setup goes in beforeRegister instead of createdCallback.
    beforeRegister() {
      this.is = 'clg-departments';
      this.properties = {
        route: {
          type: Object,
          observer: 'onRouteChanged_'
        },
        selectedItemId_: {
          type: String
        }
      }
    }

    ready() {
    }

    pageWatcher(detail) {
      if (detail.pageSelected) {
        this.fire('dispatch-action', {
          type: coligo.scripts.actions.FETCH_DEPARTMENTS
        });
      }
      if (detail.pageDeselected) {
      }
    }

    isEqual_(arg1, arg2) {
      return arg1 == arg2;
    }

    onRouteChanged_(route) {
      console.log('route changed: ', route);
      if (route.hash) {
        this.selectedItemId_ = Number(route.valueAt(1));
      }
    }

  };

  // Register the element using Polymer's constructor.
  Polymer(coligo.elements.Departments);

</script>

</dom-module>
